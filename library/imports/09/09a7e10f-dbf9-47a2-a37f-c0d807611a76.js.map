{"version":3,"sources":["assets\\Scripts\\Star.js"],"names":["cc","Class","Component","properties","pickRadius","getPlayerDistance","playerPos","game","player","getPosition","dist","node","position","sub","mag","onPicked","spawnNewStar","gainScore","destroy","update","dt","opacityRatio","timer","starDuration","minOpacity","opacity","Math","floor","onDestroy","log"],"mappings":";;;;;;AAEAA,EAAE,CAACC,KAAH,CAAS;AACL,aAASD,EAAE,CAACE,SADP;AAGL;AACAC,EAAAA,UAAU,EACV;AACIC,IAAAA,UAAU,EAAE;AADhB,GALK;AASL;AAEA;AACAC,EAAAA,iBAZK,+BAaL;AACI;AACA,QAAIC,SAAS,GAAG,KAAKC,IAAL,CAAUC,MAAV,CAAiBC,WAAjB,EAAhB,CAFJ,CAGI;;AACA,QAAIC,IAAI,GAAG,KAAKC,IAAL,CAAUC,QAAV,CAAmBC,GAAnB,CAAuBP,SAAvB,EAAkCQ,GAAlC,EAAX,CAJJ,CAMI;;AACA,WAAOJ,IAAP;AACH,GArBI;AAuBL;AACAK,EAAAA,QAxBK,sBAyBL;AACI;AACA,SAAKR,IAAL,CAAUS,YAAV,GAFJ,CAGI;;AACA,SAAKT,IAAL,CAAUU,SAAV,GAJJ,CAKI;;AACA,SAAKN,IAAL,CAAUO,OAAV;AACH,GAhCI;AAkCL;AACCC,EAAAA,MAnCI,kBAmCIC,EAnCJ,EAoCJ;AACG;AACA,QAAG,KAAKf,iBAAL,KAA2B,KAAKD,UAAnC,EACA;AACI;AACA,WAAKW,QAAL;AACA;AACH,KAPJ,CASG;;;AACA,QAAIM,YAAY,GAAG,IAAI,KAAKd,IAAL,CAAUe,KAAV,GAAgB,KAAKf,IAAL,CAAUgB,YAAjD;AACA,QAAIC,UAAU,GAAG,EAAjB,CAXH,CAYG;;AACA,SAAKb,IAAL,CAAUc,OAAV,GAAoBD,UAAU,GAAGE,IAAI,CAACC,KAAL,CAAWN,YAAY,IAAI,MAAMG,UAAV,CAAvB,CAAjC;AAEF,GAnDG;AAqDJ;AACAI,EAAAA,SAtDI,uBAuDJ;AACI5B,IAAAA,EAAE,CAAC6B,GAAH,CAAO,QAAP;AACH;AAzDG,CAAT","sourceRoot":"/","sourcesContent":["\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    //声明公共变量方法\r\n    properties:\r\n    {\r\n        pickRadius: 0,\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    //获取玩家与本物体的距离方法\r\n    getPlayerDistance()\r\n    {\r\n        //获取玩家位置\r\n        var playerPos = this.game.player.getPosition();\r\n        //获取玩家与本物体的距离\r\n        var dist = this.node.position.sub(playerPos).mag();\r\n\r\n        //返回本物体与玩家的距离数值\r\n        return dist;\r\n    },\r\n\r\n    //生成新星并销毁本物体方法\r\n    onPicked()\r\n    {\r\n        //调用方法生成新星\r\n        this.game.spawnNewStar();\r\n        //调用 Game_script 脚本的更新得分显示方法方法\r\n        this.game.gainScore();\r\n        //销毁本物体\r\n        this.node.destroy();\r\n    },\r\n\r\n    //每帧调用\r\n     update (dt) \r\n     {\r\n        //玩家的位置与本物体 < 60\r\n        if(this.getPlayerDistance() < this.pickRadius)\r\n        {\r\n            //调用\r\n            this.onPicked();\r\n            return;\r\n        }\r\n\r\n        //获逐计时器剩余时间降低透明度数值\r\n        var opacityRatio = 1 - this.game.timer/this.game.starDuration;\r\n        var minOpacity = 50;\r\n        //当前物体.不透明度 =  floor寻求整数\r\n        this.node.opacity = minOpacity + Math.floor(opacityRatio * (255 - minOpacity));\r\n        \r\n     },\r\n\r\n     //调用destroy后执行\r\n     onDestroy()\r\n     {\r\n         cc.log(\"销毁一颗星星\");\r\n     },\r\n\r\n});\r\n"]}